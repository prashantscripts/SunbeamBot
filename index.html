<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sendbird Chat Example</title>
</head>
<body>
    <div>
        <h2>Sendbird Chat</h2>
        <div id="chatContainer"></div>
        <input type="text" id="messageInput" placeholder="Type your message" />
        <button onclick="sendMessage()">Send</button>
    </div>
    <script>
        const API_BASE_URL = 'https://api-BF738831-5030-460B-9891-AC5446AAE79C.sendbird.com/v3';
        const MASTER_API_TOKEN = 'Bearer 06ab48d570b66099a56975c0de1ad7762ea904b6';
        const USER_ID = 'test_user';

        // Create a new user
        async function createUser() {
            try {
                const response = await fetch(`${API_BASE_URL}/users`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': MASTER_API_TOKEN
                    },
                    body: JSON.stringify({
                        user_id: USER_ID,
                        nickname: 'Test User'
                    })
                });

                const result = await response.json();
                if (response.ok) {
                    console.log('User created:', result);
                } else {
                    console.error('Error creating user:', result);
                }
            } catch (error) {
                console.error('Error creating user:', error);
            }
        }

        // Send a message
        async function sendMessage() {
            const message = document.getElementById('messageInput').value;
            if (!message) return;

            try {
                const response = await fetch(`${API_BASE_URL}/users/${USER_ID}/messages`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': MASTER_API_TOKEN
                    },
                    body: JSON.stringify({
                        message: message,
                        sender_id: USER_ID
                    })
                });

                const result = await response.json();
                if (response.ok) {
                    console.log('Message sent:', result);
                } else {
                    console.error('Error sending message:', result);
                }
            } catch (error) {
                console.error('Error sending message:', error);
            }
        }

        // Initialize the application
        createUser();
    </script>
</body>
</html>
